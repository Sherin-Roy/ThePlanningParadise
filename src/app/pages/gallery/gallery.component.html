<app-hero title="Design Gallery"
          subtitle="Visual inspiration for your perfect celebration."
          backgroundImage="assets/images/gallery/premium/PRE-1004.jpg">
</app-hero>

<section class="section-padding">
     <div class="container">
          <!-- Filters -->
          <div class="filters text-center mb-5">
               <button *ngFor="let cat of categories"
                       class="filter-btn"
                       [class.active]="activeCategory === cat"
                       (click)="filterGallery(cat)">
                    {{ cat }}
               </button>
          </div>

          <!-- Category Header -->
          <div class="category-header mb-5 animate-fade-up">
               <div class="header-info-wrapper">
                    <div class="header-text">
                         <h2 class="category-title">{{ currentCategoryTitle }}</h2>
                         <p class="category-subtitle">{{ currentCategorySubtitle }}</p>
                    </div>
                    <div class="header-stats">
                         <div class="stat-item animate-float">
                              <span class="stat-value">{{ filteredItems.length }}</span>
                              <span class="stat-label">Total Designs</span>
                         </div>
                    </div>
               </div>
          </div>

          <!-- Gallery Grid -->
          <div class="gallery-grid">
               <app-design-card *ngFor="let item of paginatedItems; let i = index"
                                [item]="item"
                                (view)="openModal(i)"
                                class="animate-fade-up">
               </app-design-card>
          </div>

          <!-- Pagination -->
          <div class="pagination-bar"
               *ngIf="totalPages > 1">
               <span class="pagination-info">
                    Showing page {{ currentPage }} of {{ totalPages }}
               </span>
               <div class="pagination-controls">
                    <button class="page-btn"
                            [disabled]="currentPage === 1"
                            (click)="changePage(-1)">
                         <i class="bi bi-chevron-left"></i>
                    </button>
                    <span class="page-numbers">{{ currentPage }}</span>
                    <button class="page-btn"
                            [disabled]="currentPage === totalPages"
                            (click)="changePage(1)">
                         <i class="bi bi-chevron-right"></i>
                    </button>
               </div>
          </div>
     </div>
</section>

<!-- Modal Overlay -->
<div class="modal-overlay"
     *ngIf="selectedItem"
     (click)="closeModal()">
     <div class="modal-container"
          (click)="$event.stopPropagation()">
          <button class="close-btn"
                  (click)="closeModal()">
               <i class="bi bi-x-lg"></i>
          </button>

          <div class="modal-content-grid">
               <!-- Left Side: Carousel -->
               <div class="modal-carousel">
                    <div class="carousel-wrapper">
                         <!-- Blurred Backdrop -->
                         <div class="carousel-backdrop"
                              [style.backgroundImage]="'url(' + currentDisplayImage + ')'"></div>

                         <app-lazy-image [src]="currentDisplayImage"
                                         [alt]="selectedItem.alt"
                                         objectFit="contain"
                                         [transparent]="true"
                                         class="carousel-image animate-fade-up">
                         </app-lazy-image>

                         <div class="carousel-controls"
                              *ngIf="selectedItem.gallery && selectedItem.gallery.length > 1">
                              <button class="carousel-btn prev"
                                      (click)="prevImage()">
                                   <i class="bi bi-chevron-left"></i>
                              </button>
                              <button class="carousel-btn next"
                                      (click)="nextImage()">
                                   <i class="bi bi-chevron-right"></i>
                              </button>
                         </div>

                         <div class="carousel-indicators"
                              *ngIf="selectedItem.gallery && selectedItem.gallery.length > 1">
                              <span *ngFor="let img of selectedItem.gallery; let i = index"
                                    [class.active]="i === currentImageIndex"
                                    (click)="currentImageIndex = i"></span>
                         </div>
                    </div>
               </div>

               <!-- Right Side: Details -->
               <div class="modal-details">
                    <div class="header-section">
                         <h2 class="modal-title">{{ selectedItem.designCode }}</h2>
                         <div class="badges">
                              <span class="category-chip"
                                    [class.gold]="selectedItem.category === 'Gold'"
                                    [class.silver]="selectedItem.category === 'Silver'">
                                   {{ selectedItem.category }}
                              </span>
                              <span class="tag-chip"
                                    *ngIf="selectedItem.tag">{{ selectedItem.tag }}</span>
                         </div>
                    </div>

                    <div class="details-list">
                         <div class="detail-item">
                              <div class="label"><i class="bi bi-hash"></i> Design Code</div>
                              <div class="value">{{ selectedItem.designCode }}</div>
                         </div>
                         <div class="detail-item">
                              <div class="label"><i class="bi bi-people"></i> Popularity</div>
                              <div class="value">{{ selectedItem.clientCount }} Clients Chose This</div>
                         </div>
                         <div class="detail-item">
                              <div class="label"><i class="bi bi-info-circle"></i> Description</div>
                              <div class="value">{{ selectedItem.alt }}</div>
                         </div>
                    </div>

                    <div class="description-section">
                         <h4>About this Design</h4>
                         <p>This stunning {{ selectedItem.category }} package design features {{ selectedItem.alt | lowercase }}. Perfect for creating an unforgettable atmosphere for your special day.</p>
                    </div>

                    <div class="action-section">
                         <button class="btn-inquire"
                                 (click)="inquire(selectedItem)">
                              <i class="bi bi-envelope-fill"></i> Inquire About This Design
                         </button>
                    </div>
               </div>
          </div>
     </div>
</div>