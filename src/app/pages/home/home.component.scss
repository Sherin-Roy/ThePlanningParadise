@import '../../../styles/variables';
@import '../../../styles/mixins';

.section-header {
     margin-bottom: $spacing-lg;
     text-align: center;
     padding: 0 $spacing-md; // Add horizontal padding

     p {
          color: $text-muted;
          font-size: 1rem;
          max-width: 800px;
          margin: 0 auto;
          white-space: normal; // Allow text wrapping

          @include tablet {
               font-size: 1.05rem;
          }

          @include desktop {
               font-size: 1.1rem;
          }
     }
}

.services-wrapper {
     position: relative;
     overflow: hidden;
     padding: $spacing-sm 0;
     max-width: 1600px; // Increased to fit 4 cards of 350px
     margin: 0 auto;

     // Feathered/faded edges
     &::before,
     &::after {
          content: '';
          position: absolute;
          top: 0;
          bottom: 0;
          width: 150px;
          z-index: 10;
          pointer-events: none;
     }

     &::before {
          left: 0;
          background: linear-gradient(to right, rgba($light, 1) 0%, rgba($light, 0) 100%);
     }

     &::after {
          right: 0;
          background: linear-gradient(to left, rgba($light, 1) 0%, rgba($light, 0) 100%);
     }
}

.services-track {
     display: flex;
     gap: $spacing-md;
     padding: 0 $spacing-lg;
     animation: scroll-left 30s linear infinite;

     &:hover {
          animation-play-state: paused;
     }

     .service-card {
          flex: 0 0 350px; // Fixed 350px width
          min-width: 350px;
          max-width: 350px;

          background: $white;
          padding: $spacing-md;
          border-radius: 15px;
          text-align: center;
          box-shadow: $shadow-sm;
          border: 1px solid rgba($dark, 0.05);

          .icon-wrapper {
               width: 70px;
               height: 70px;
               background: rgba($primary, 0.1);
               border-radius: 50%;
               margin: 0 auto $spacing-sm;
               @include flex-center;
               color: $primary;
               font-size: 1.8rem;
               transition: $transition-base;
          }

          h3 {
               font-family: $font-heading;
               color: $primary-dark;
               font-size: 1.3rem;
               margin-bottom: 0.5rem;
               transition: color 0.3s ease;
          }

          p {
               color: $text-main;
               font-size: 0.95rem;
          }

          &:hover {
               transform: translateY(-5px);
               box-shadow: $shadow-lg;
               border-color: rgba($primary, 0.2);

               h3 {
                    color: $primary;
               }

               .icon-wrapper {
                    background: $primary;
                    color: $white;
                    transform: scale(1.1);
               }
          }
     }
}

// Keyframe for continuous scroll
@keyframes scroll-left {
     0% {
          transform: translateX(0);
     }

     100% {
          // Move by half the width (7 cards + gaps)
          transform: translateX(calc(-7 * (350px + #{$spacing-md})));
     }
}

.bg-light {
     background-color: $light;
}

// Projects Carousel
.projects-wrapper {
     position: relative;
     overflow: hidden;
     padding: $spacing-sm 0;
     max-width: 1600px; // Increased to fit 4 cards
     margin: 0 auto;

     // Feathered/faded edges
     &::before,
     &::after {
          content: '';
          position: absolute;
          top: 0;
          bottom: 0;
          width: 150px;
          z-index: 10;
          pointer-events: none;
     }

     &::before {
          left: 0;
          background: linear-gradient(to right, rgba($light, 1) 0%, rgba($light, 0) 100%);
     }

     &::after {
          right: 0;
          background: linear-gradient(to left, rgba($light, 1) 0%, rgba($light, 0) 100%);
     }
}

.projects-track {
     display: flex;
     gap: $spacing-md;
     padding: 20px $spacing-lg; // Added vertical padding for shadows
     animation: scroll-projects 40s linear infinite;

     &:hover {
          animation-play-state: paused;
     }

     app-project-card {
          flex: 0 0 360px; // Fixed width for 4 cards
          min-width: 360px;
          max-width: 360px;
     }
}

// Keyframe for projects scroll (left to right)
@keyframes scroll-projects {
     0% {
          transform: translateX(calc(-4 * (360px + #{$spacing-md})));
     }

     100% {
          transform: translateX(0);
     }
}

.mt-5 {
     margin-top: 3rem;
     text-align: center;
}

.why-choose-us {
     // Background image with proper settings
     background: url('/assets/images/about/about-bg.jpg') no-repeat center center fixed;
     -webkit-background-size: cover;
     -moz-background-size: cover;
     -o-background-size: cover;
     background-size: cover;
     background-color: $dark; // Fallback

     padding: $spacing-xl 0;
     position: relative;
     color: $white;
     min-height: 600px;
     padding-left: 10px !important;
     padding-right: 12px !important;

     // Dark overlay
     &::before {
          content: '';
          position: absolute;
          top: 0;
          left: 0;
          right: 0;
          bottom: 0;
          background: rgba($dark, 0.85); // Darker overlay for better text readability
          z-index: 1;
     }

     .content {
          position: relative;
          z-index: 2;
     }

     h2 {
          color: $white;
          text-align: center;
          margin-bottom: $spacing-lg;
          font-size: 2.5rem;
     }

     // Statistics Grid
     .statistics-grid {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
          gap: $spacing-md;
          margin-bottom: $spacing-xl;
          padding: 0 $spacing-md; // Add horizontal padding

          @include tablet {
               padding: 0 $spacing-lg;
          }

          @include desktop {
               grid-template-columns: repeat(4, 1fr);
               padding: 0;
          }

          .stat-card {
               text-align: center;
               padding: $spacing-md;
               background: rgba($white, 0.05);
               border-radius: 15px;
               border: 1px solid rgba($secondary, 0.2);
               transition: $transition-base;

               &:hover {
                    background: rgba($white, 0.1);
                    border-color: rgba($secondary, 0.4);
                    transform: translateY(-5px);
               }

               i {
                    font-size: 2.5rem;
                    color: $secondary;
                    margin-bottom: $spacing-sm;
                    display: block;
               }

               .stat-value {
                    font-family: $font-heading;
                    font-size: 3rem;
                    font-weight: 700;
                    color: $secondary;
                    margin-bottom: 0.5rem;
                    line-height: 1;
               }

               .stat-label {
                    color: rgba($white, 0.9);
                    font-size: 1rem;
                    text-transform: uppercase;
                    letter-spacing: 1px;
                    margin: 0;
               }
          }
     }

     // Features List
     .features-list {
          display: flex;
          justify-content: center;
          flex-wrap: wrap;
          gap: $spacing-lg;
          text-align: center;
     }

     .feature {
          flex: 1;
          min-width: 250px;

          .number {
               display: block;
               font-family: $font-heading;
               font-size: 3rem;
               color: rgba($secondary, 0.3);
               font-weight: 700;
               margin-bottom: -10px;
          }

          h4 {
               color: $secondary;
               font-size: 1.4rem;
               margin-bottom: 0.5rem;
          }

          p {
               color: rgba($white, 0.9);
          }
     }
}

.cta-section {
     text-align: center;
     background: linear-gradient(rgba($white, 0.95), rgba($white, 0.95)), url('/assets/images/cta-bg.jpg') center/cover;
     padding: $spacing-lg $spacing-md;
     border-top: 1px solid rgba($primary, 0.1);

     @include desktop {
          padding: $spacing-lg 0;
     }

     h2 {
          font-family: $font-heading;
          font-size: 2rem;
          color: $primary-dark;
          margin-bottom: $spacing-sm;
          font-weight: 800;
          letter-spacing: -0.5px;

          @include tablet {
               font-size: 2.5rem;
          }

          @include desktop {
               font-size: 3rem;
          }
     }

     p {
          color: $text-main;
          font-size: 1.1rem;
          margin-bottom: $spacing-md;
          padding: 0 $spacing-sm;
          font-weight: 500;

          @include tablet {
               font-size: 1.25rem;
          }

          @include desktop {
               font-size: 1.4rem;
               padding: 0;
          }
     }
}

// Modal Styles
.modal-overlay {
     position: fixed;
     top: 0;
     left: 0;
     width: 100%;
     height: 100%;
     background: rgba(0, 0, 0, 0.8);
     z-index: 1000;
     display: flex;
     justify-content: center;
     align-items: center;
     padding: 20px;
     animation: fadeIn 0.3s ease;

     .modal-content {
          background: $white;
          width: 100%;
          max-width: 1100px;
          max-height: 90vh;
          border-radius: 30px;
          position: relative;
          overflow: hidden; // Ensures content respects radius
          display: flex;
          flex-direction: column;
          animation: slideUp 0.4s cubic-bezier(0.16, 1, 0.3, 1);
          box-shadow: 0 25px 50px rgba(0, 0, 0, 0.5);

          .close-modal-btn {
               position: absolute;
               top: 20px;
               right: 20px;
               width: 40px;
               height: 40px;
               background: rgba(255, 255, 255, 0.9);
               border: none;
               border-radius: 50%;
               z-index: 10;
               cursor: pointer;
               display: flex;
               align-items: center;
               justify-content: center;
               font-size: 1.2rem;
               color: $text-main;
               transition: all 0.3s ease;

               &:hover {
                    background: $error;
                    color: $white;
                    transform: rotate(90deg);
               }
          }

          .modal-body-grid {
               display: grid;
               grid-template-columns: 1fr;
               height: 100%;
               overflow-y: auto; // Allow scroll inside modal if needed

               @include desktop {
                    grid-template-columns: 1.2fr 0.8fr;
                    overflow: hidden; // Desktop splits scrolling
               }
          }

          // Carousel Section
          .modal-carousel {
               background: #f0f0f0;
               position: relative;
               min-height: 300px;

               @include desktop {
                    height: 100%;
                    min-height: 600px;
               }

               .carousel-wrapper {
                    width: 100%;
                    height: 100%;
                    position: relative;

                    .carousel-image {
                         width: 100%;
                         height: 100%;
                         object-fit: cover;
                         display: block; // Removes whitespace
                    }

                    .carousel-controls {
                         .carousel-btn {
                              position: absolute;
                              top: 50%;
                              transform: translateY(-50%);
                              width: 45px;
                              height: 45px;
                              background: rgba(255, 255, 255, 0.2);
                              backdrop-filter: blur(5px);
                              border: 1px solid rgba(255, 255, 255, 0.3);
                              color: $white;
                              border-radius: 50%;
                              display: flex;
                              align-items: center;
                              justify-content: center;
                              cursor: pointer;
                              transition: all 0.3s ease;
                              z-index: 5;

                              &:hover {
                                   background: $white;
                                   color: $primary;
                              }

                              &.prev {
                                   left: 20px;
                              }

                              &.next {
                                   right: 20px;
                              }
                         }
                    }

                    .carousel-indicators {
                         position: absolute;
                         bottom: 20px;
                         left: 50%;
                         transform: translateX(-50%);
                         display: flex;
                         gap: 8px;
                         z-index: 5;

                         span {
                              width: 8px;
                              height: 8px;
                              background: rgba(255, 255, 255, 0.5);
                              border-radius: 50%;
                              cursor: pointer;
                              transition: all 0.3s ease;

                              &.active {
                                   width: 24px;
                                   background: $white;
                                   border-radius: 10px;
                              }
                         }
                    }
               }
          }

          // Details Section
          .modal-details {
               padding: 30px;
               overflow-y: auto; // Scrollable independent of image on desktop
               background: $white;

               .modal-title {
                    font-size: 2rem;
                    font-family: $font-heading;
                    color: $primary-dark;
                    margin-bottom: 5px;
                    line-height: 1.2;
               }

               .modal-category {
                    display: inline-block;
                    background: rgba($secondary, 0.1);
                    color: $secondary;
                    padding: 5px 15px;
                    border-radius: 20px;
                    font-size: 0.85rem;
                    font-weight: 600;
                    text-transform: uppercase;
                    margin-bottom: 30px;
               }

               .details-list {
                    display: grid;
                    grid-template-columns: 1fr 1fr;
                    gap: 20px;
                    margin-bottom: 30px;

                    .detail-item {
                         .label {
                              font-size: 0.85rem;
                              color: $text-muted;
                              margin-bottom: 5px;
                              display: flex;
                              align-items: center;
                              gap: 6px;

                              i {
                                   color: $primary;
                              }
                         }

                         .value {
                              font-weight: 600;
                              color: $text-main;
                              font-size: 1rem;
                         }
                    }
               }

               .description-section {
                    margin-bottom: 30px;
                    border-top: 1px solid rgba(0, 0, 0, 0.05);
                    padding-top: 20px;

                    h4 {
                         font-size: 1.2rem;
                         font-weight: 700;
                         margin-bottom: 10px;
                         color: $primary-dark;
                    }

                    p {
                         color: $text-main;
                         line-height: 1.6;
                         font-size: 0.95rem;
                    }
               }

               .social-links {
                    .fb-link {
                         display: inline-flex;
                         align-items: center;
                         gap: 10px;
                         background: #1877F2;
                         color: $white;
                         padding: 12px 25px;
                         border-radius: 8px;
                         text-decoration: none;
                         font-weight: 600;
                         transition: transform 0.3s ease;

                         &:hover {
                              transform: translateY(-2px);
                              box-shadow: 0 5px 15px rgba(24, 119, 242, 0.3);
                         }
                    }
               }
          }
     }
}

// Keyframes
@keyframes fadeIn {
     from {
          opacity: 0;
     }

     to {
          opacity: 1;
     }
}

@keyframes slideUp {
     from {
          transform: translateY(50px);
          opacity: 0;
     }

     to {
          transform: translateY(0);
          opacity: 1;
     }
}