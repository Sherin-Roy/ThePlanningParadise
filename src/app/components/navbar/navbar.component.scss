@import '../../../styles/variables';
@import '../../../styles/mixins';

nav {
     position: fixed;
     top: 0;
     left: 0;
     width: 100%;
     z-index: 1000;
     padding: 1rem 0;
     transition: all 0.4s ease;

     // Premium Dark Glassmorphism Background
     background: rgba($dark, 0.85); // Semi-transparent dark
     backdrop-filter: blur(12px); // Strong blur for glass effect
     -webkit-backdrop-filter: blur(12px);
     box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);

     .logo-text {
          color: $white;
     }

     .nav-links li a {
          color: $white;

          &:hover,
          &.active {
               color: $secondary;
          }
     }

     .container {
          @include container;
     }

     .nav-content {
          @include flex-between;
     }
}

.logo {
     z-index: 1001;
     text-decoration: none;

     .logo-text {
          font-family: $font-heading;
          font-size: 1.5rem;
          font-weight: 700;
          color: $white; // Default for hero
          transition: color 0.3s ease;
          text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);

          .highlight {
               color: $secondary;
          }
     }
}

// Ensure contrasting text on non-scrolled navbar if hero is dark
// Assuming hero is dark, nav text waits
// But if other pages have light background? 
// We might need a "dark-nav" class or ensure all pages start with hero.
// Or default to dark text and only white on Home.
// For now, let's keep it robust. Default white text if over image, but needs background.
// Actually, standard modern pattern: Transparent over Hero (White text), White sticky (Dark text).
// But on internal pages without hero?
// I'll add a class 'always-scrolled' if needed, or rely on pages to have a top header.
// I'll make default nav text dark for safety unless overridden? No, typically dark overlay.
// Let's set default text color to $white assuming transparent navbar is over dark backgrounds mostly.
// But we need to handle "scrolled" state which turns it white.

.nav-links {
     display: flex;
     gap: 2.5rem;
     align-items: center;

     li {
          a {
               font-family: $font-body;
               font-weight: 500;
               font-size: 1rem;
               color: $white; // Default transparent state
               text-transform: uppercase;
               letter-spacing: 1px;
               position: relative;
               padding-bottom: 5px;
               transition: color 0.3s ease;

               &::after {
                    content: '';
                    position: absolute;
                    bottom: 0;
                    left: 0;
                    width: 0;
                    height: 2px;
                    background: $secondary;
                    transition: width 0.3s ease;
               }

               &:hover,
               &.active {
                    color: $secondary;

                    &::after {
                         width: 100%;
                    }
               }
          }
     }

     .btn-contact {
          padding: 10px 25px;
          border: 2px solid $secondary;
          border-radius: 50px;
          color: $secondary !important;

          &:hover,
          &.active {
               background: $secondary;
               color: $dark !important;

               &::after {
                    display: none; // No underline for button
               }
          }
     }
}

.menu-toggle {
     display: none;
     flex-direction: column;
     gap: 6px;
     background: transparent;
     width: 30px;
     z-index: 1001;

     .bar {
          width: 100%;
          height: 3px;
          background: $white; // Default
          border-radius: 3px;
          transition: all 0.3s ease;
     }
}

// Scrolled state overrides for Menu Toggle
nav.scrolled .menu-toggle .bar {
     background: $text-main;
}

// Mobile Responsive
@include tablet {
     .menu-toggle {
          display: flex;
     }

     .nav-links {
          position: fixed;
          top: 0;
          right: -100%;
          width: 85%;
          max-width: 350px;
          height: 100vh;
          background: linear-gradient(135deg, rgba($dark, 0.98) 0%, rgba($primary-dark, 0.98) 100%);
          backdrop-filter: blur(10px);
          -webkit-backdrop-filter: blur(10px);
          flex-direction: column;
          padding: 120px 2rem 2rem;
          gap: 1.5rem;
          box-shadow: -5px 0 30px rgba(0, 0, 0, 0.5);
          transition: right 0.4s cubic-bezier(0.4, 0, 0.2, 1);
          overflow-y: auto;
          z-index: 999;

          &.active {
               right: 0;
          }

          li {
               opacity: 0;
               transform: translateX(50px);
               transition: all 0.3s ease;

               a {
                    color: $white;
                    font-size: 1.1rem;
                    padding: 0.75rem 1rem;
                    display: block;
                    border-radius: 8px;
                    transition: all 0.3s ease;

                    &:hover,
                    &.active {
                         background: rgba($secondary, 0.15);
                         color: $secondary;
                         transform: translateX(5px);
                    }

                    &::after {
                         display: none; // Remove underline in mobile
                    }
               }
          }

          // Stagger animation for menu items
          &.active {
               li {
                    opacity: 1;
                    transform: translateX(0);

                    @for $i from 1 through 6 {
                         &:nth-child(#{$i}) {
                              transition-delay: #{$i * 0.05}s;
                         }
                    }
               }
          }

          .btn-contact {
               margin-top: 1rem;
               padding: 12px 30px !important;
               text-align: center;
               background: $secondary;
               color: $dark !important;
               border: 2px solid $secondary;

               &:hover,
               &.active {
                    background: transparent;
                    color: $secondary !important;
                    transform: translateX(0) !important;
               }
          }
     }

     // Backdrop overlay
     nav.menu-open::after {
          content: '';
          position: fixed;
          top: 0;
          left: 0;
          width: 100%;
          height: 100vh;
          background: rgba($dark, 0.7);
          z-index: 998;
          animation: fadeIn 0.3s ease;
     }

     // Hamburger animation
     nav.menu-open {
          .menu-toggle {
               .bar:nth-child(1) {
                    transform: rotate(45deg) translate(8px, 6px);
                    background: $white;
               }

               .bar:nth-child(2) {
                    opacity: 0;
               }

               .bar:nth-child(3) {
                    transform: rotate(-45deg) translate(7px, -5px);
                    background: $white;
               }
          }
     }
}

@keyframes fadeIn {
     from {
          opacity: 0;
     }

     to {
          opacity: 1;
     }
}